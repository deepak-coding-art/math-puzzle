(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(373)}])},1391:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(5893),l=n(7364),i=n.n(l);function o(){return(0,a.jsx)("svg",{width:"800px",height:"800px",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:i().loadingAnimation,children:(0,a.jsx)("path",{d:"m20 12c0 1.3811-0.3576 2.7386-1.0378 3.9405-0.6803 1.2019-1.6601 2.2072-2.8441 2.9182-1.1841 0.7109-2.532 1.1032-3.9126 1.1387-1.3806 0.0354-2.7469-0.2871-3.9658-0.9362",stroke:"#000",strokeLinecap:"round",strokeWidth:"3.5556"})})}},373:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n(5893),l=n(9008),i=n.n(l),o=n(9034),s=n.n(o),r=n(7294);function c(){return(0,a.jsxs)("svg",{width:"50px",height:"50px",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"}),(0,a.jsx)("path",{d:"m237.25 512 265.41 265.34a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312l-265.41 265.34z"})]})}var u=n(6628),d=n.n(u);function p(e){let{piceData:t,setEditPopup:n}=e,l=e=>{let{connect_id:t}=e;n(t)};return(0,a.jsxs)("div",{className:d().box,children:[(0,a.jsx)("div",{className:"".concat(d().middler," ").concat(d().middlerTop," ").concat(t.top.connect_id>1e3&&"".concat(d().wrongSides)),onClick:()=>l(t.top),children:t.top.equation}),(0,a.jsx)("div",{className:"".concat(d().middler," ").concat(d().middlerRight," ").concat(t.right.connect_id>1e3&&"".concat(d().wrongSides)),onClick:()=>l(t.right),children:t.right.equation}),(0,a.jsx)("div",{className:"".concat(d().middler," ").concat(d().middlerLeft," ").concat(t.left.connect_id>1e3&&"".concat(d().wrongSides)),onClick:()=>l(t.left),children:t.left.equation}),(0,a.jsx)("div",{className:"".concat(d().middler," ").concat(d().middlerBottom," ").concat(t.bottom.connect_id>1e3&&"".concat(d().wrongSides)),onClick:()=>l(t.bottom),children:t.bottom.equation})]})}var m=n(6403);function _(e){let{puzzleBoxes:t,setPuzzleBoxes:n,handleEditEquation:l,nextToConfirm:i,openCreatePuzzle:o,selectedSize:s}=e,[u,_]=(0,r.useState)(null),[h,x]=(0,r.useState)(null),[z,g]=(0,r.useState)(null),[j,f]=(0,r.useState)(null),[v,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=(0,m.K_)(s);n(e)},[s]),(0,r.useEffect)(()=>{if(u){if(u>1e3){let e=(0,m.Yb)(u,t);b(e[0].equation)}else{let e=(0,m.Yb)(u,t);e.forEach(e=>{"l"===e.type?g(e.equation):"t"===e.type?g(e.equation):"r"===e.type?f(e.equation):"b"===e.type&&f(e.equation)})}}},[u]),(0,r.useEffect)(()=>{t&&t.length>0&&(()=>{let e=t.every(e=>!!e.left.equation&&!!e.right.equation&&!!e.top.equation&&!!e.bottom.equation);x(e)})()},[t]);let k=e=>{e.preventDefault();let{LHS:t,RHS:n,wrongValue:a}=Object.fromEntries(new FormData(e.target));a?l(u,a,void 0,!0):l(u,t,n),_(null),g(null),f(null)},w=e=>{let t=e.target.value;g(t)},N=e=>{let t=e.target.value;f(t)},C=e=>{let t=e.target.value;b(t)},B=e=>{_(null)},y=e=>{e.stopPropagation()};return(0,a.jsxs)("div",{className:d().container,children:[(0,a.jsx)("div",{className:"".concat(d().gridContainer," ").concat("4x4"===s&&"".concat(d().gridContainer4)),children:t.map((e,t)=>(0,a.jsx)(p,{piceData:e,setEditPopup:_},"boxId-".concat(t)))}),(0,a.jsxs)("button",{className:"".concat(d().nextBtn," ").concat(h||"".concat(d().disabled)),onClick:i,disabled:!h,children:["Next ",(0,a.jsx)(c,{})]}),(0,a.jsxs)("button",{className:d().backBtn,onClick:o,children:[(0,a.jsx)(c,{})," Back"]}),u&&(0,a.jsx)("div",{onClick:B,className:d().editPopupBg,children:(0,a.jsxs)("form",{onClick:y,onSubmit:k,className:d().editPopup,children:[" ",u<1e3?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"text",name:"RHS",className:d().input,placeholder:"Enter answer...",value:j||"",onChange:N,autoFocus:!0}),(0,a.jsx)("input",{type:"text",name:"LHS",className:d().input,placeholder:"Enter equation...",value:z||"",onChange:w})]}):(0,a.jsx)("input",{type:"text",name:"wrongValue",className:d().input,placeholder:"Enter wrong answer...",value:v||"",onChange:C,autoFocus:!0}),(0,a.jsx)("button",{type:"submit",className:d().buttons,children:"Confirm"})]})})]})}var h=n(5791),x=n.n(h),z=n(7977),g=n.n(z);function j(){return(0,a.jsx)("svg",{width:"10px",height:"10px",fill:"#000",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"m8 7v1h-1.5c-0.82843 0-1.5 0.67157-1.5 1.5v9c0 0.82843 0.67157 1.5 1.5 1.5h7c0.82843 0 1.5-0.67157 1.5-1.5v-1.5h1v1.5c0 1.3807-1.1193 2.5-2.5 2.5h-7c-1.3807 0-2.5-1.1193-2.5-2.5v-9c0-1.3807 1.1193-2.5 2.5-2.5h1.5zm8-3h-5.5c-0.82843 0-1.5 0.67157-1.5 1.5v9c0 0.82843 0.67157 1.5 1.5 1.5h7c0.82843 0 1.5-0.67157 1.5-1.5v-7.5h-2.5c-0.27614 0-0.5-0.22386-0.5-0.5v-2.5zm4 2.528v7.972c0 1.3807-1.1193 2.5-2.5 2.5h-7c-1.3807 0-2.5-1.1193-2.5-2.5v-9c0-1.3807 1.1193-2.5 2.5-2.5h5.972c0.13275-0.0084195 0.27092 0.035839 0.38153 0.14645l3 3c0.11061 0.11061 0.15487 0.24878 0.14645 0.38153zm-3-0.52798h1.2929l-1.2929-1.2929v1.2929zm-5.5 7c-0.27614 0-0.5-0.22386-0.5-0.5s0.22386-0.5 0.5-0.5h2c0.27614 0 0.5 0.22386 0.5 0.5s-0.22386 0.5-0.5 0.5h-2zm0-2c-0.27614 0-0.5-0.22386-0.5-0.5s0.22386-0.5 0.5-0.5h5c0.27614 0 0.5 0.22386 0.5 0.5s-0.22386 0.5-0.5 0.5h-5zm0-2c-0.27614 0-0.5-0.22386-0.5-0.5s0.22386-0.5 0.5-0.5h5c0.27614 0 0.5 0.22386 0.5 0.5s-0.22386 0.5-0.5 0.5h-5z"})})}function f(){return(0,a.jsx)("svg",{width:"50px",height:"50px",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",stroke:"#000",children:(0,a.jsx)("path",{d:"m6 12 4.2426 4.2426 8.4844-8.4853",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})})}function v(e){let{url:t}=e,[n,l]=(0,r.useState)(null),i=()=>{l(!0),navigator.clipboard.writeText(t),setTimeout(()=>{l(null)},1e3)};return(0,a.jsxs)("div",{className:g().container,children:[(0,a.jsx)("h1",{className:g().url,children:t}),(0,a.jsx)("button",{onClick:i,className:g().button,children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{}),"Copied!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{}),"Copy"]})})]})}function b(){return(0,a.jsxs)("svg",{width:"50px",height:"50px",fill:"none",stroke:"#000",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"m10 11v6",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,a.jsx)("path",{d:"m14 11v6",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,a.jsx)("path",{d:"m4 7h16",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,a.jsx)("path",{d:"m6 7h12v11c0 1.6569-1.3431 3-3 3h-6c-1.6568 0-3-1.3431-3-3v-11z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,a.jsx)("path",{d:"m9 5c0-1.1046 0.89543-2 2-2h2c1.1046 0 2 0.89543 2 2v2h-6v-2z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})]})}var k=n(1391);let w=["Pick number of puzzle pieces","3 X 3","4 X 4"];function N(e){let{puzzle:t,handleDelete:n,deleting:l}=e,[i,o]=(0,r.useState)(null);return(0,r.useEffect)(()=>{t&&t.id&&o("".concat(window.location.origin).concat("","/play?id=").concat(t.id))},[t]),(0,a.jsx)("div",{className:x().cardContainer,children:(0,a.jsxs)("div",{className:x().cardText,children:[(0,a.jsx)("h1",{className:x().cardName,children:t.name}),(0,a.jsx)("h3",{className:x().cardSize,children:t.size}),(0,a.jsx)("p",{className:x().cardDescription,children:t.description}),(0,a.jsxs)("div",{className:x().urlBox,children:[(0,a.jsx)("h2",{children:"Puzzle URL: "}),i&&(0,a.jsx)(v,{url:i})]}),(0,a.jsx)("div",{className:x().actionButtons,children:(0,a.jsx)("button",{className:"".concat(x().actionButton),onClick:()=>n(t.id),disabled:l===t.id,children:l!==t.id?(0,a.jsx)(b,{}):(0,a.jsx)(k.Z,{})})})]})})}var C=n(8844);function B(e){let{backButtonMain:t,supabase:n,user_id:l}=e,[i,o]=(0,r.useState)([]),[s,u]=(0,r.useState)(null),[d,p]=(0,r.useState)(null),[m,_]=(0,r.useState)(null);(0,r.useEffect)(()=>{h(l)},[l]);let h=async e=>{if(u(!0),e){let{data:t,error:a}=await n.from("puzzles").select("*").eq("profile_id",e);if(a)return;o(t)}else{let{data:e,error:t}=await n.from("puzzles").select("*").eq("geek",!0);if(t)return;o(e)}u(null)},z=async e=>{_(e);let{data:t,error:a}=await n.from("puzzles").delete().eq("id",e);if(a){p("Oops some error."),setTimeout(()=>{p(null)},2e3);return}_(!1),o(t=>{let n=[...t];return n.filter(t=>t.id!==e)})};return s?(0,a.jsx)(C.Z,{}):i.length<=0?(0,a.jsxs)("div",{className:x().noPuzzles,children:[(0,a.jsx)("h1",{children:"Sorry no puzzles Found"}),(0,a.jsxs)("button",{className:x().backButton,onClick:t,children:[(0,a.jsx)(c,{})," Back"]})]}):(0,a.jsxs)("div",{className:x().container,children:[d&&(0,a.jsx)("p",{className:x().errorMessage,children:d}),i.map((e,t)=>(0,a.jsx)(N,{puzzle:e,handleDelete:z,deleting:m},"card-".concat(t))),(0,a.jsxs)("button",{className:x().backButton,onClick:t,children:[(0,a.jsx)(c,{})," Back"]})]})}var y=n(4053),S=n(1163);function E(){let e=(0,y.useSupabaseClient)(),{isLoading:t,session:n,error:l}=(0,y.useSessionContext)(),[o,u]=(0,r.useState)("Deepak"),[d,p]=(0,r.useState)(null),[h,x]=(0,r.useState)("main"),[z,g]=(0,r.useState)([]),[j,f]=(0,r.useState)(null),[b,N]=(0,r.useState)(null),[E,L]=(0,r.useState)(null),[P,q]=(0,r.useState)(null),[G,H]=(0,r.useState)(null),[F,I]=(0,r.useState)(null),[M,T]=(0,r.useState)(null),D=(0,r.useRef)(null),X=(0,S.useRouter)();(0,r.useEffect)(()=>{if(!t){if(n&&n.user){let e=n.user.user_metadata.full_name;u(e)}else X.replace("/login")}},[t,n,l]);let W=()=>{x("puzzle"),L(null)},O=()=>{x("main")},U=e=>{e.preventDefault(),R()},R=()=>{x("editor")},Y=()=>{x("confirm")},Z=()=>{x("geek")},A=()=>{x("my")},K=e=>{if(e.target.files.length>0){let t=e.target.files[0].name;N(e.target.files[0]),f(t)}},Q=()=>{D.current.click()},V=e=>{let t=e.target.value;t<0||(0==t?L("3x3"):1==t&&L("4x4"))},J=async t=>{if(t.preventDefault(),!j||!G||!E||z.length<5){I("Fill all the fields.");return}let a="public/".concat(Date.now(),".jpg");T(!0);let{data:l,error:i}=await e.from("puzzles").insert([{profile_id:n.user.id,size:E,name:G,description:P,image:a,boxes:{data:z}}]).select().single();if(i){I("Error saving puzzle"),console.log(i),T(null);return}let{data:o,error:s}=await e.storage.from("images").upload(a,b,{cacheControl:"3600",upsert:!1});if(s){console.log(s),I("Error uploading file"),T(null);return}p("".concat(window.location.origin).concat("","/play?id=").concat(l.id)),T(null),L(null),g([]),H(null),N(null),f(null),q(null),x("main")},$=async()=>{let{data:t,error:n}=await e.auth.signOut();n&&setMenuError("Something went wrong."),t&&X.replace("/login")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Math Puzzle | Create"}),(0,a.jsx)("meta",{name:"description",content:"A math puzzle that students can solve and teachers can create new puzzles. share with student to solve."}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),!t&&n&&n.user?(0,a.jsxs)("main",{className:s().main,children:["main"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h1",{className:s().greeting,children:["Welcome ",o]}),d&&(0,a.jsx)("p",{className:s().message,children:"Puzzle Saved!"}),d&&(0,a.jsx)(v,{url:d}),(0,a.jsxs)("div",{className:s().menu,children:[(0,a.jsx)("button",{className:s().buttons,onClick:W,children:"Create new puzzle"}),(0,a.jsx)("button",{className:s().buttons,onClick:A,children:"My puzzles"}),(0,a.jsx)("button",{className:s().buttons,onClick:Z,children:"Geekster Puzzles"}),(0,a.jsxs)("button",{className:s().buttons,onClick:$,children:["Logout ",(0,a.jsx)(c,{})]})]})]}),"puzzle"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:s().greeting,children:"Create new Puzzle"}),(0,a.jsxs)("form",{onSubmit:U,className:s().menu,children:[(0,a.jsx)("button",{type:"button",className:s().backButton,onClick:O,children:(0,a.jsx)(c,{})}),(0,a.jsx)("select",{onChange:V,className:s().selectBox,children:w.map((e,t)=>0===t?(0,a.jsx)("option",{disabled:!0,selected:!0,defaultValue:0,children:e},"option-".concat(t)):(0,a.jsx)("option",{value:t-1,children:e},"option-".concat(t)))}),(0,a.jsx)("button",{className:s().buttons,type:"submit",disabled:!E,children:"Start to create puzzle"})]})]}),"editor"===h&&(0,a.jsx)(_,{puzzleBoxes:z,setPuzzleBoxes:g,handleEditEquation:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=[...z];g(l=a?(0,m.er)(e,t,l):(0,m.u0)(e,t,n,l))},nextToConfirm:Y,openCreatePuzzle:W,selectedSize:E}),"confirm"===h&&(0,a.jsxs)("form",{onSubmit:J,className:s().menu,children:[(0,a.jsx)("p",{className:s().errorMessage,children:F}),(0,a.jsx)("button",{type:"button",className:s().backButton,onClick:R,children:(0,a.jsx)(c,{})}),(0,a.jsx)("input",{type:"text",name:"puzzleName",placeholder:"Puzzle name...",className:s().input,onChange:e=>H(e.target.value),value:G||"",minLength:6,maxLength:18,required:!0}),(0,a.jsxs)("div",{className:s().uploadBox,onClick:Q,children:[(0,a.jsx)("input",{type:"file",name:"upload",accept:"image/jpeg",className:s().fileInput,required:!0,hidden:"hidden",onChange:K,ref:D}),(0,a.jsx)("span",{className:s().uploadFileName,children:j||"Click to Upload Image. image must be less than 10MB and .jpg format"})]}),(0,a.jsx)("textarea",{type:"text",name:"description",placeholder:"Puzzle description...",className:"".concat(s().input," ").concat(s().descriptionInput),minLength:6,maxLength:500,onChange:e=>q(e.target.value),value:P||""}),(0,a.jsxs)("button",{className:"".concat(s().buttons," ").concat(s().loadingSave),type:"submit",disabled:!j||M,children:[M&&(0,a.jsx)(k.Z,{}),"Create"]})]}),"geek"===h&&(0,a.jsx)(B,{backButtonMain:O,supabase:e,user_id:null}),"my"===h&&(0,a.jsx)(B,{backButtonMain:O,supabase:e,user_id:n.user.id})]}):(0,a.jsx)(C.Z,{})]})}},9034:function(e){e.exports={main:"Home_main__nLjiQ",greeting:"Home_greeting__PBgQH",menu:"Home_menu__2ncGe",backButton:"Home_backButton__p7X_l",selectBox:"Home_selectBox__F5xbe",input:"Home_input__ZarWZ",fileInput:"Home_fileInput__xvelA",buttons:"Home_buttons__OcSYZ",uploadBox:"Home_uploadBox__8V6oz",uploadFileName:"Home_uploadFileName__UpOAF",descriptionInput:"Home_descriptionInput__3uYuu",errorMessage:"Home_errorMessage__I_ltD",message:"Home_message__qpB0D",loadingSave:"Home_loadingSave__j6fXF"}},7977:function(e){e.exports={container:"copyUrlBox_container__3eXXe",url:"copyUrlBox_url__Shh4N",button:"copyUrlBox_button__1_Wy7"}},7364:function(e){e.exports={loadingAnimation:"loading_loadingAnimation__05UV3","loading-spin":"loading_loading-spin__PvNWf"}},6628:function(e){e.exports={container:"puzzleEditor_container__GQYRn",gridContainer:"puzzleEditor_gridContainer__Y_GCn",gridContainer4:"puzzleEditor_gridContainer4__8olfz",box:"puzzleEditor_box__U4K10",middler:"puzzleEditor_middler__S_WoH",wrongSides:"puzzleEditor_wrongSides__Ktyb9",middlerTop:"puzzleEditor_middlerTop__WKCEF",middlerBottom:"puzzleEditor_middlerBottom__MUQa_",middlerLeft:"puzzleEditor_middlerLeft__M6w_L",middlerRight:"puzzleEditor_middlerRight__4Ofd8",editPopupBg:"puzzleEditor_editPopupBg__29aS2",editPopup:"puzzleEditor_editPopup__IpfiR",input:"puzzleEditor_input__6XtmZ",buttons:"puzzleEditor_buttons__ruu_8",nextBtn:"puzzleEditor_nextBtn__bBz48",disabled:"puzzleEditor_disabled__pcYXM",backBtn:"puzzleEditor_backBtn__IF2yk"}},5791:function(e){e.exports={container:"puzzleGlary_container__qOHfA",cardContainer:"puzzleGlary_cardContainer__TxhUT",cardText:"puzzleGlary_cardText__tx3j_",cardName:"puzzleGlary_cardName__X4bb_",cardSize:"puzzleGlary_cardSize__qO56X",cardDescription:"puzzleGlary_cardDescription__e0bx4",backButton:"puzzleGlary_backButton__0pcsL",imageCont:"puzzleGlary_imageCont__qQ9tl",puzzleImageContainer:"puzzleGlary_puzzleImageContainer__XXmo6",puzzleImage3:"puzzleGlary_puzzleImage3__EgaDi",puzzleImage4:"puzzleGlary_puzzleImage4__rPYy8",puzzleImageBox:"puzzleGlary_puzzleImageBox__OvDe9",noPuzzles:"puzzleGlary_noPuzzles__3iTCU",urlBox:"puzzleGlary_urlBox__KT4Rg",errorMessage:"puzzleGlary_errorMessage__Eornm",actionButtons:"puzzleGlary_actionButtons__OVX1r",actionButton:"puzzleGlary_actionButton__pklYH"}}},function(e){e.O(0,[933,774,888,179],function(){return e(e.s=5728)}),_N_E=e.O()}]);