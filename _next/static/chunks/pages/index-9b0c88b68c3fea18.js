(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6788)}])},1391:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(5893),l=n(7364),i=n.n(l);function s(){return(0,a.jsx)("svg",{width:"800px",height:"800px",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:i().loadingAnimation,children:(0,a.jsx)("path",{d:"m20 12c0 1.3811-0.3576 2.7386-1.0378 3.9405-0.6803 1.2019-1.6601 2.2072-2.8441 2.9182-1.1841 0.7109-2.532 1.1032-3.9126 1.1387-1.3806 0.0354-2.7469-0.2871-3.9658-0.9362",stroke:"#000",strokeLinecap:"round",strokeWidth:"3.5556"})})}},6788:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var a=n(5893),l=n(9008),i=n.n(l),s=n(9034),o=n.n(s),r=n(7294);function c(){return(0,a.jsxs)("svg",{width:"50px",height:"50px",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"}),(0,a.jsx)("path",{d:"m237.25 512 265.41 265.34a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312l-265.41 265.34z"})]})}var u=n(6628),d=n.n(u);function p(e){let{piceData:t,setEditPopup:n}=e,l=e=>{let{connect_id:t}=e;n(t)};return(0,a.jsxs)("div",{className:d().box,children:[(0,a.jsx)("div",{className:"".concat(d().middler," ").concat(d().middlerTop," ").concat(t.top.connect_id>1e3&&"".concat(d().wrongSides)),onClick:()=>l(t.top),children:t.top.equation}),(0,a.jsx)("div",{className:"".concat(d().middler," ").concat(d().middlerRight," ").concat(t.right.connect_id>1e3&&"".concat(d().wrongSides)),onClick:()=>l(t.right),children:t.right.equation}),(0,a.jsx)("div",{className:"".concat(d().middler," ").concat(d().middlerLeft," ").concat(t.left.connect_id>1e3&&"".concat(d().wrongSides)),onClick:()=>l(t.left),children:t.left.equation}),(0,a.jsx)("div",{className:"".concat(d().middler," ").concat(d().middlerBottom," ").concat(t.bottom.connect_id>1e3&&"".concat(d().wrongSides)),onClick:()=>l(t.bottom),children:t.bottom.equation})]})}var m=n(6403);function _(e){let{puzzleBoxes:t,setPuzzleBoxes:n,handleEditEquation:l,nextToConfirm:i,openCreatePuzzle:s,selectedSize:o}=e,[u,_]=(0,r.useState)(null),[h,x]=(0,r.useState)(null),[g,z]=(0,r.useState)(null),[j,f]=(0,r.useState)(null),[v,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=(0,m.K_)(o);n(e)},[o]),(0,r.useEffect)(()=>{if(u){if(u>1e3){let e=(0,m.Yb)(u,t);b(e[0].equation)}else{let e=(0,m.Yb)(u,t);e.forEach(e=>{"l"===e.type?z(e.equation):"t"===e.type?z(e.equation):"r"===e.type?f(e.equation):"b"===e.type&&f(e.equation)})}}},[u]),(0,r.useEffect)(()=>{t&&t.length>0&&(()=>{let e=t.every(e=>!!e.left.equation&&!!e.right.equation&&!!e.top.equation&&!!e.bottom.equation);x(e)})()},[t]);let k=e=>{e.preventDefault();let{LHS:t,RHS:n,wrongValue:a}=Object.fromEntries(new FormData(e.target));a?l(u,a,void 0,!0):l(u,t,n),_(null),z(null),f(null)},N=e=>{let t=e.target.value;z(t)},w=e=>{let t=e.target.value;f(t)},B=e=>{let t=e.target.value;b(t)},y=e=>{_(null)},C=e=>{e.stopPropagation()};return(0,a.jsxs)("div",{className:d().container,children:[(0,a.jsx)("div",{className:"".concat(d().gridContainer," ").concat("4x4"===o&&"".concat(d().gridContainer4)),children:t.map((e,t)=>(0,a.jsx)(p,{piceData:e,setEditPopup:_},"boxId-".concat(t)))}),(0,a.jsxs)("button",{className:"".concat(d().nextBtn," ").concat(h||"".concat(d().disabled)),onClick:i,disabled:!h,children:["n\xe6ste ",(0,a.jsx)(c,{})]}),(0,a.jsxs)("button",{className:d().backBtn,onClick:s,children:[(0,a.jsx)(c,{})," tilbage"]}),u&&(0,a.jsx)("div",{onClick:y,className:d().editPopupBg,children:(0,a.jsxs)("form",{onClick:C,onSubmit:k,className:d().editPopup,children:[" ",u<1e3?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"text",name:"RHS",className:d().input,placeholder:"Skriv opgave...",value:j||"",onChange:w,autoFocus:!0}),(0,a.jsx)("input",{type:"text",name:"LHS",className:d().input,placeholder:"skriv svaret...",value:g||"",onChange:N})]}):(0,a.jsx)("input",{type:"text",name:"wrongValue",className:d().input,placeholder:"Skriv forkert svar...",value:v||"",onChange:B,autoFocus:!0}),(0,a.jsx)("button",{type:"submit",className:d().buttons,children:"Gem"})]})})]})}var h=n(5791),x=n.n(h);function g(e){let{imagePath:t,supabase:n}=e,[l,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let e=async()=>{let{data:e,error:a}=await n.storage.from("images").getPublicUrl(t);i(e.publicUrl)};t&&e(),s&&o(!0)},[]),l)?(0,a.jsx)("img",{src:l,alt:"image",className:x().puzzleImage}):(0,a.jsx)("div",{className:x().imageLoading})}var z=n(7977),j=n.n(z);function f(){return(0,a.jsx)("svg",{width:"10px",height:"10px",fill:"#000",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"m8 7v1h-1.5c-0.82843 0-1.5 0.67157-1.5 1.5v9c0 0.82843 0.67157 1.5 1.5 1.5h7c0.82843 0 1.5-0.67157 1.5-1.5v-1.5h1v1.5c0 1.3807-1.1193 2.5-2.5 2.5h-7c-1.3807 0-2.5-1.1193-2.5-2.5v-9c0-1.3807 1.1193-2.5 2.5-2.5h1.5zm8-3h-5.5c-0.82843 0-1.5 0.67157-1.5 1.5v9c0 0.82843 0.67157 1.5 1.5 1.5h7c0.82843 0 1.5-0.67157 1.5-1.5v-7.5h-2.5c-0.27614 0-0.5-0.22386-0.5-0.5v-2.5zm4 2.528v7.972c0 1.3807-1.1193 2.5-2.5 2.5h-7c-1.3807 0-2.5-1.1193-2.5-2.5v-9c0-1.3807 1.1193-2.5 2.5-2.5h5.972c0.13275-0.0084195 0.27092 0.035839 0.38153 0.14645l3 3c0.11061 0.11061 0.15487 0.24878 0.14645 0.38153zm-3-0.52798h1.2929l-1.2929-1.2929v1.2929zm-5.5 7c-0.27614 0-0.5-0.22386-0.5-0.5s0.22386-0.5 0.5-0.5h2c0.27614 0 0.5 0.22386 0.5 0.5s-0.22386 0.5-0.5 0.5h-2zm0-2c-0.27614 0-0.5-0.22386-0.5-0.5s0.22386-0.5 0.5-0.5h5c0.27614 0 0.5 0.22386 0.5 0.5s-0.22386 0.5-0.5 0.5h-5zm0-2c-0.27614 0-0.5-0.22386-0.5-0.5s0.22386-0.5 0.5-0.5h5c0.27614 0 0.5 0.22386 0.5 0.5s-0.22386 0.5-0.5 0.5h-5z"})})}function v(){return(0,a.jsx)("svg",{width:"50px",height:"50px",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",stroke:"#000",children:(0,a.jsx)("path",{d:"m6 12 4.2426 4.2426 8.4844-8.4853",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})})}function b(e){let{url:t}=e,[n,l]=(0,r.useState)(null),i=()=>{l(!0),navigator.clipboard.writeText(t),setTimeout(()=>{l(null)},1e3)};return(0,a.jsxs)("div",{className:j().container,children:[(0,a.jsx)("h1",{className:j().url,children:t}),(0,a.jsx)("button",{onClick:i,className:j().button,children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{}),"Kopieret!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{}),"kopi\xe9r"]})})]})}function k(){return(0,a.jsxs)("svg",{width:"50px",height:"50px",fill:"none",stroke:"#000",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"m10 11v6",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,a.jsx)("path",{d:"m14 11v6",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,a.jsx)("path",{d:"m4 7h16",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,a.jsx)("path",{d:"m6 7h12v11c0 1.6569-1.3431 3-3 3h-6c-1.6568 0-3-1.3431-3-3v-11z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,a.jsx)("path",{d:"m9 5c0-1.1046 0.89543-2 2-2h2c1.1046 0 2 0.89543 2 2v2h-6v-2z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})]})}var N=n(1391),w=n(4507);function B(e){let{puzzle:t,handleDelete:n,deleting:l,user_id:i,supabase:s}=e,[o,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{t&&t.id&&c("".concat(window.location.origin).concat(w.VQ,"/play?id=").concat(t.id))},[t]),(0,a.jsxs)("div",{className:x().cardContainer,children:[(0,a.jsx)("div",{className:x().imageCont,children:(0,a.jsx)(g,{imagePath:t.image,supabase:s})}),(0,a.jsxs)("div",{className:x().cardText,children:[(0,a.jsx)("h1",{className:x().cardName,children:t.name}),(0,a.jsxs)("h3",{className:x().cardSize,children:[t.size," puslespil"]}),(0,a.jsx)("p",{className:x().cardDescription,children:t.description}),(0,a.jsxs)("div",{className:x().urlBox,children:[(0,a.jsx)("h2",{children:"Link til puslespil: "}),o&&(0,a.jsx)(b,{url:o})]}),(0,a.jsx)("div",{className:x().actionButtons,children:i&&(0,a.jsx)("button",{className:"".concat(x().actionButton),onClick:()=>n(t.id),disabled:l===t.id,children:l!==t.id?(0,a.jsx)(k,{}):(0,a.jsx)(N.Z,{})})})]})]})}var y=n(8844);function C(e){let{backButtonMain:t,supabase:n,user_id:l}=e,[i,s]=(0,r.useState)([]),[o,u]=(0,r.useState)(null),[d,p]=(0,r.useState)(null),[m,_]=(0,r.useState)(null);(0,r.useEffect)(()=>{h(l)},[l]);let h=async e=>{if(u(!0),e){let{data:t,error:a}=await n.from("puzzles").select("*").eq("profile_id",e);if(a)return;s(t)}else{let{data:e,error:t}=await n.from("puzzles").select("*").eq("geek",!0);if(t)return;s(e)}u(null)},g=async e=>{_(e);let{data:t,error:a}=await n.from("puzzles").delete().eq("id",e);if(a){p("Oops some error."),setTimeout(()=>{p(null)},2e3);return}_(!1),s(t=>{let n=[...t];return n.filter(t=>t.id!==e)})};return o?(0,a.jsx)(y.Z,{}):i.length<=0?(0,a.jsxs)("div",{className:x().noPuzzles,children:[(0,a.jsx)("h1",{children:"Beklager ingen g\xe5der fundet"}),(0,a.jsxs)("button",{className:x().backButton,onClick:t,children:[(0,a.jsx)(c,{})," tilbage"]})]}):(0,a.jsxs)("div",{className:x().container,children:[d&&(0,a.jsx)("p",{className:x().errorMessage,children:d}),i.map((e,t)=>(0,a.jsx)(B,{puzzle:e,handleDelete:g,deleting:m,user_id:l,supabase:n},"card-".concat(t))),(0,a.jsxs)("button",{className:x().backButton,onClick:t,children:[(0,a.jsx)(c,{})," tilbage"]})]})}var S=n(4053),E=n(1163),L=n(3478);function G(){let e=(0,S.useSupabaseClient)(),{isLoading:t,session:n,error:l}=(0,S.useSessionContext)(),[s,u]=(0,r.useState)("Deepak"),[d,p]=(0,r.useState)(null),[h,x]=(0,r.useState)("main"),[g,z]=(0,r.useState)([]),[j,f]=(0,r.useState)(null),[v,k]=(0,r.useState)(null),[B,G]=(0,r.useState)(null),[P,q]=(0,r.useState)(null),[H,I]=(0,r.useState)(null),[F,M]=(0,r.useState)(null),[D,T]=(0,r.useState)(null),X=(0,r.useRef)(null),O=(0,E.useRouter)();(0,r.useEffect)(()=>{if(!t){if(n&&n.user){let e=n.user.user_metadata.full_name;u(e)}else O.replace("/login")}},[t,n,l]);let W=()=>{x("puzzle"),G(null)},U=()=>{x("main")},R=e=>{e.preventDefault(),V()},V=()=>{x("editor")},Z=()=>{x("confirm")},Y=()=>{x("geek")},A=()=>{x("my")},K=e=>{if(e.target.files.length>0){let t=e.target.files[0].name;k(e.target.files[0]),f(t)}},Q=()=>{X.current.click()},J=e=>{let t=e.target.value;t<0||(0==t?G("3x3"):1==t&&G("4x4"))},$=async t=>{if(t.preventDefault(),!j||!H||!B||g.length<5){M("Fill all the fields.");return}let a="public/".concat(Date.now(),".jpg");T(!0);let{data:l,error:i}=await e.from("puzzles").insert([{profile_id:n.user.id,size:B,name:H,description:P,image:a,boxes:{data:g}}]).select().single();if(i){M("Error saving puzzle"),console.log(i),T(null);return}let{data:s,error:o}=await e.storage.from("images").upload(a,v,{cacheControl:"3600",upsert:!1});if(o){console.log(o),M("Error uploading file"),T(null);return}p("".concat(window.location.origin).concat(w.VQ,"/play?id=").concat(l.id)),T(null),G(null),z([]),I(null),k(null),f(null),q(null),x("main")},ee=async()=>{let{data:t,error:n}=await e.auth.signOut();n&&setMenuError("Something went wrong."),t&&O.replace("/login")};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Math Puzzle | Create"}),(0,a.jsx)("meta",{name:"description",content:"A math puzzle that students can solve and teachers can create new puzzles. share with student to solve."}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),!t&&n&&n.user?(0,a.jsxs)("main",{className:o().main,children:["main"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h1",{className:o().greeting,children:["Velkommen ",s," puslespil: l\xe6g brikkerne vha. matematik"]}),d&&(0,a.jsx)("p",{className:o().message,children:"Puslespil gemt!"}),d&&(0,a.jsx)(b,{url:d}),(0,a.jsxs)("div",{className:o().menu,children:[(0,a.jsx)("button",{className:o().buttons,onClick:W,children:"Lav nyt puslespil"}),(0,a.jsx)("button",{className:o().buttons,onClick:A,children:"Mine puslespil"}),(0,a.jsx)("button",{className:o().buttons,onClick:Y,children:"Geeksters puslespil"}),(0,a.jsxs)("button",{className:o().buttons,onClick:ee,children:["Log ud ",(0,a.jsx)(c,{})]})]})]}),"puzzle"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:o().greeting,children:"Create new Puzzle"}),(0,a.jsxs)("form",{onSubmit:R,className:o().menu,children:[(0,a.jsx)("button",{type:"button",className:o().backButton,onClick:U,children:(0,a.jsx)(c,{})}),(0,a.jsx)("select",{onChange:J,className:o().selectBox,children:w.qF.map((e,t)=>0===t?(0,a.jsx)("option",{disabled:!0,selected:!0,defaultValue:0,children:e},"option-".concat(t)):(0,a.jsx)("option",{value:t-1,children:e},"option-".concat(t)))}),(0,a.jsx)("button",{className:o().buttons,type:"submit",disabled:!B,children:"Begynd at lave puslespil"})]})]}),"editor"===h&&(0,a.jsx)(_,{puzzleBoxes:g,setPuzzleBoxes:z,handleEditEquation:function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=[...g];z(l=a?(0,m.er)(e,t,l):(0,m.u0)(e,t,n,l))},nextToConfirm:Z,openCreatePuzzle:W,selectedSize:B}),"confirm"===h&&(0,a.jsxs)("form",{onSubmit:$,className:o().menu,children:[(0,a.jsx)("p",{className:o().errorMessage,children:F}),(0,a.jsx)("button",{type:"button",className:o().backButton,onClick:V,children:(0,a.jsx)(c,{})}),(0,a.jsx)("input",{type:"text",name:"puzzleName",placeholder:"Navn p\xe5 puslespil...",className:o().input,onChange:e=>I(e.target.value),value:H||"",minLength:6,maxLength:18,required:!0}),(0,a.jsxs)("div",{className:o().uploadBox,onClick:Q,children:[(0,a.jsx)("input",{type:"file",name:"upload",accept:"image/jpeg",className:o().fileInput,required:!0,hidden:"hidden",onChange:K,ref:X}),(0,a.jsx)("span",{className:o().uploadFileName,children:j||"Klik her for at uploade JPEG-billede. Maks 10 MB"})]}),(0,a.jsx)("textarea",{type:"text",name:"description",placeholder:"Puslespilsbeskrivelse...",className:"".concat(o().input," ").concat(o().descriptionInput),minLength:6,maxLength:500,onChange:e=>q(e.target.value),value:P||""}),(0,a.jsxs)("button",{className:"".concat(o().buttons," ").concat(o().loadingSave),type:"submit",disabled:!j||D,children:[D&&(0,a.jsx)(N.Z,{}),"Gem"]})]}),"geek"===h&&(0,a.jsx)(C,{backButtonMain:U,supabase:e,user_id:null}),"my"===h&&(0,a.jsx)(C,{backButtonMain:U,supabase:e,user_id:n.user.id}),(0,a.jsx)(L.Z,{})]}):(0,a.jsx)(y.Z,{})]})}},9034:function(e){e.exports={main:"Home_main__nLjiQ",greeting:"Home_greeting__PBgQH",menu:"Home_menu__2ncGe",backButton:"Home_backButton__p7X_l",selectBox:"Home_selectBox__F5xbe",input:"Home_input__ZarWZ",fileInput:"Home_fileInput__xvelA",buttons:"Home_buttons__OcSYZ",uploadBox:"Home_uploadBox__8V6oz",uploadFileName:"Home_uploadFileName__UpOAF",descriptionInput:"Home_descriptionInput__3uYuu",errorMessage:"Home_errorMessage__I_ltD",message:"Home_message__qpB0D",loadingSave:"Home_loadingSave__j6fXF"}},7977:function(e){e.exports={container:"copyUrlBox_container__3eXXe",url:"copyUrlBox_url__Shh4N",button:"copyUrlBox_button__1_Wy7"}},7364:function(e){e.exports={loadingAnimation:"loading_loadingAnimation__05UV3","loading-spin":"loading_loading-spin__PvNWf"}},6628:function(e){e.exports={container:"puzzleEditor_container__GQYRn",gridContainer:"puzzleEditor_gridContainer__Y_GCn",gridContainer4:"puzzleEditor_gridContainer4__8olfz",box:"puzzleEditor_box__U4K10",middler:"puzzleEditor_middler__S_WoH",wrongSides:"puzzleEditor_wrongSides__Ktyb9",middlerTop:"puzzleEditor_middlerTop__WKCEF",middlerBottom:"puzzleEditor_middlerBottom__MUQa_",middlerLeft:"puzzleEditor_middlerLeft__M6w_L",middlerRight:"puzzleEditor_middlerRight__4Ofd8",editPopupBg:"puzzleEditor_editPopupBg__29aS2",editPopup:"puzzleEditor_editPopup__IpfiR",input:"puzzleEditor_input__6XtmZ",buttons:"puzzleEditor_buttons__ruu_8",nextBtn:"puzzleEditor_nextBtn__bBz48",disabled:"puzzleEditor_disabled__pcYXM",backBtn:"puzzleEditor_backBtn__IF2yk"}},5791:function(e){e.exports={container:"puzzleGlary_container__qOHfA",cardContainer:"puzzleGlary_cardContainer__TxhUT",cardText:"puzzleGlary_cardText__tx3j_",cardName:"puzzleGlary_cardName__X4bb_",cardSize:"puzzleGlary_cardSize__qO56X",cardDescription:"puzzleGlary_cardDescription__e0bx4",backButton:"puzzleGlary_backButton__0pcsL",imageCont:"puzzleGlary_imageCont__qQ9tl",puzzleImageContainer:"puzzleGlary_puzzleImageContainer__XXmo6",puzzleImage3:"puzzleGlary_puzzleImage3__EgaDi",puzzleImage4:"puzzleGlary_puzzleImage4__rPYy8",puzzleImageBox:"puzzleGlary_puzzleImageBox__OvDe9",noPuzzles:"puzzleGlary_noPuzzles__3iTCU",urlBox:"puzzleGlary_urlBox__KT4Rg",errorMessage:"puzzleGlary_errorMessage__Eornm",actionButtons:"puzzleGlary_actionButtons__OVX1r",actionButton:"puzzleGlary_actionButton__pklYH",puzzleImage:"puzzleGlary_puzzleImage__yVRVD"}}},function(e){e.O(0,[450,774,888,179],function(){return e(e.s=5728)}),_N_E=e.O()}]);